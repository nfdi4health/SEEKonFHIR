<% if @error %>
  $j('#publication_preview_container').hide();
  $j('#publication_error').show().highlight('red');
  $j('#publication_error').html('<%= escape_javascript(render(partial: 'publications/publication_error', locals: { publication: @publication, error_text: @error_text })) -%>');
<% else %>
  $j('#publication_error').hide();
  $j('#publication_preview_container').show().highlight();
  $j('#publication_preview').highlight();
  $j('#publication_preview_container').html('<%= escape_javascript(render(partial: 'publications/publication_preview', locals: { publication: @publication, authors: @authors })) -%>');
<% end %>